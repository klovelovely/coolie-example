/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.9.0
 * @license MIT
 */
!function(){"use strict";var e,n="0.9.0",t=function(){return(new Date).getTime()},r=0,i=window,o=i.document,u={},c=[],a=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},s=function(e){return"array"===a(e)},f=function(e){return"function"===a(e)},l=function(e){return"string"===a(e)},d=function(e,n,t){var r,i;if(s(e))for(r=t?e.length-1:0,i=t?0:e.length;(t?r>i:i>r)&&n(r,e[r])!==!1;t?r--:r++);else if("object"==typeof e)for(r in e)if(n(r,e[r])===!1)break},p=function(){var e={},n=i.console,t=["log","warn","group","groupEnd"];return d(t,function(t,r){e[r]=function(){if(u.debug&&n&&n[r])try{n[r].apply(n,arguments)}catch(e){}}}),e}(),g=/\/[^/]+$/,v=/^((ftp|file|https?):)?\/\/[^\/]*/,m=/^\/\//,h=function(e,n){return e=e.replace(v,""),"/"===e?e:g.test(e)?n?e+"/":e.replace(g,"/"):e},w=/^\/|((http|ftp)s?:\/\/)/,_=/^(\.{1,2})\//,y=/(\/[^/]+?)?\/$/,x=function(e,n){if(!n||w.test(n))return n;var t;for(n="./"+n;t=n.match(_);)n=n.replace(_,""),2===t[1].length&&(e=e.replace(y,"/"));return e+n},b=function(e,n){return(n||o).getElementsByTagName(e)},A=/[\?#].*?$/,j=/\.js($|\?)/i,$=function(e,n){return e=e.replace(A,""),n?e:(y.test(e)&&(e+="index"),e+(j.test(e)?"":".js"))},q=function(e){return $(e.hasAttribute?e.src:e.getAttribute("src",4))},E=function(e,n){return e.getAttribute("data-"+n)},S=/loaded|complete/,k=o.head||b("head",o)[0],C=b("base",k)[0],T=/\.[^.]*$/,L=function(e){if(!u._v)return e;var n=l(u._v)?u._v:u._v[e];return n?e.replace(T,"."+n+"$&"):e},B=null,M=function(n,t){var r=L(n),u=o.createElement("script"),c=!1,a=function(e){if(!c){if(c=!0,e&&"error"===e.type)throw"load script error\n"+r;t!==!0&&(B=u,pn(u)),k.removeChild(u),u=null}};u.src=r,u.id=n,u.async=!0,u.defer=!0,u.onload!==e?u.onload=u.onerror=a:u.onreadystatechange=function(e){S.test(u.readyState)&&(e=e||i.event,a(e))},C?k.insertBefore(u,C):k.appendChild(u)},D=function(e){var n,t=L(e),r=new XMLHttpRequest,i=function(){if(4===r.readyState&&!n){if(n=!0,200!==r.status&&304!==r.status)throw"ajax error\n"+t;gn({_isAn:V._isAn,id:e,url:t,deps:[],factory:function(){return r.responseText}})}};r.onload=r.onreadystatechange=r.onerror=r.onabort=r.ontimeout=i,r.open("GET",t),r.send(null)},G=function(e){gn({_isAn:V._isAn,id:e,url:L(e),deps:[],factory:function(){return e}})},H=function(){var e=b("script");return e[e.length-1]},N=H(),O=function(e){return m.test(e)&&(e=location.protocol+e),(e.match(v)||[])[0]},R=q(N),X=O(R),z=E(N,"config"),F=E(N,"main"),I=h(R),J=z?x(I,z):null,K=z?h(J):null,P=z?x(X,J):null,Q=function(){if(!z)return null;var e=O(P);return e?e:(e=X,P=e+P,e)}(),U=K,V={},W={};W.version=n;var Y=!1,Z={},en=[],nn={},tn=1,rn=0;W.config=function(e){var n=H(),t=q(n);if(R!==t&&(U=K=h(t),Q=O(t)),u=e,U=x(K,h(u.base,!0)),u.version=u.version||{},l(u.version)?u._v=u.version:(u._v={},d(u.version,function(e,n){u._v[Q+x(U,e)]=n})),F){var r=V.url=$(Q+x(U,F));V._defined=!1,Z[r]=V}return e.debug=e.debug!==!1,W},W.use=function(e){return Y?W:(Y=!0,r=t(),e&&(V.url=Q+x(U,e),Z[V.url]=V),V.url?(M(V.url),p.group("coolie modules"),W):W)},W.callback=function(e){return V._executed&&f(e)?(e.call(W,V.exports),W):(f(e)&&c.push(e),W)};var on=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,un=/\\\\/g,cn=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,an=function(e){return ln.test(e)?{name:$(e.replace(ln,""),!0),type:"text"}:dn.test(e)?{name:$(e.replace(dn,""),!0),type:"image"}:{name:$(e),type:"js"}},sn={image:"image",text:"text",html:"text",css:"text"},fn=function(e){var n=[];return e.replace(un,"").replace(on,function(e,t,r){if(r){var i,o=r.match(cn);i=o[2]?{name:$(o[1],!0),type:sn[o[2].toLowerCase()]}:an(o[1]),n.push(i)}}),n},ln=/^(css|html|text)!/i,dn=/^(image)!/i,pn=function(e){var n=!0,t=en.shift(),r=t[0],i=t[1],o=t[2],u=e.id,c=q(e),a=h(u);f(t[2])?n=!1:f(t[1])?(r=null,i=[],o=t[1]):f(t[0])&&(o=t[0],i=fn(o.toString()),r=null),r=V._defined&&V._isAn?u:r||u;var s={_isAn:n,_path:a,_node:e,id:r,url:c,deps:i,factory:o};V.id||(n||(Z[r]=Z[V.url]),s._isMain=!0,V=s,V._defined=!0);var p=[];d(i,function(e,n){if(l(n)&&(n={id:n}),V._isAn){var t=x(a,n.name);n.id=$(Q+t,"js"!==n.type)}if(r===n.id)throw"required myself: \n"+r;if(nn[n.id]&&d(nn[n.id].deps,function(e,n){if(n===r)throw"required circle: \n"+n+"\n"+r}),!Z[n.id]&&(p.push(n.id),Z[n.id]=!0,tn++,V._isAn))switch(n.type){case"text":D(n.id);break;case"image":G(n.id);break;default:M(n.id)}}),s.deps=p,gn(s),en.length&&pn(B)},gn=function(e){e.exports={},e._execute=function(){var n=function(n,t){var r;if(V._isAn&&(r=t?{name:n,type:t}:an(n),n=Q+$(x(e._path,r.name),"js"!==r.type)),!nn[n])throw"can not found module \n"+n+"\nbut required in\n"+e.id;return nn[n]._execute()};return function(){var t=e.id;return e._executed?nn[t].exports:(e._executed=!0,nn[t].exports=e.factory.call(window,n,e.exports,e)||e.exports,nn[t].exports)}}(),nn[e.id]=e,rn++,p.log("module "+e.id),en.length||rn!==tn||(p.log("past "+(t()-r)+"ms"),p.groupEnd("coolie modules"),V._execute(),d(c,function(e,n){n.call(W,V.exports)}))},vn=function(e,n,t){en.push([e,n,t])};z&&M(P,!0),window.coolie=W,window.coolie.modules=nn,window.coolie.configs=u,window.coolie.each=d,window.define=vn,window.define.amd={},window.define.cmd={}}();